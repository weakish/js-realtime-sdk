{"version":3,"file":"webrtc.min.js","sources":["../../../node_modules/eventemitter3/index.js","../../../node_modules/javascript-state-machine/state-machine.js","../../../node_modules/inherit/lib/inherit.js","../src/realtime.js","../src/signalings/signaling.js","../src/signalings/answer.js","../src/signalings/ice-candidate.js","../src/signalings/refusal.js","../src/signalings/cancelation.js","../src/call/call.js","../src/call/call-state-machine.js","../src/call/outgoing-call.js","../src/call/incoming-call.js","../src/signalings/offer.js","../src/webrtc-client.js","../src/index.js"],"sourcesContent":["'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","/*\n\n  Javascript State Machine Library - https://github.com/jakesgordon/javascript-state-machine\n\n  Copyright (c) 2012, 2013, 2014, 2015, Jake Gordon and contributors\n  Released under the MIT license - https://github.com/jakesgordon/javascript-state-machine/blob/master/LICENSE\n\n*/\n\n(function () {\n\n  var StateMachine = {\n\n    //---------------------------------------------------------------------------\n\n    VERSION: \"2.4.0\",\n\n    //---------------------------------------------------------------------------\n\n    Result: {\n      SUCCEEDED:    1, // the event transitioned successfully from one state to another\n      NOTRANSITION: 2, // the event was successfull but no state transition was necessary\n      CANCELLED:    3, // the event was cancelled by the caller in a beforeEvent callback\n      PENDING:      4  // the event is asynchronous and the caller is in control of when the transition occurs\n    },\n\n    Error: {\n      INVALID_TRANSITION: 100, // caller tried to fire an event that was innapropriate in the current state\n      PENDING_TRANSITION: 200, // caller tried to fire an event while an async transition was still pending\n      INVALID_CALLBACK:   300 // caller provided callback function threw an exception\n    },\n\n    WILDCARD: '*',\n    ASYNC: 'async',\n\n    //---------------------------------------------------------------------------\n\n    create: function(cfg, target) {\n\n      var initial      = (typeof cfg.initial == 'string') ? { state: cfg.initial } : cfg.initial; // allow for a simple string, or an object with { state: 'foo', event: 'setup', defer: true|false }\n      var terminal     = cfg.terminal || cfg['final'];\n      var fsm          = target || cfg.target  || {};\n      var events       = cfg.events || [];\n      var callbacks    = cfg.callbacks || {};\n      var map          = {}; // track state transitions allowed for an event { event: { from: [ to ] } }\n      var transitions  = {}; // track events allowed from a state            { state: [ event ] }\n\n      var add = function(e) {\n        var from = Array.isArray(e.from) ? e.from : (e.from ? [e.from] : [StateMachine.WILDCARD]); // allow 'wildcard' transition if 'from' is not specified\n        map[e.name] = map[e.name] || {};\n        for (var n = 0 ; n < from.length ; n++) {\n          transitions[from[n]] = transitions[from[n]] || [];\n          transitions[from[n]].push(e.name);\n\n          map[e.name][from[n]] = e.to || from[n]; // allow no-op transition if 'to' is not specified\n        }\n        if (e.to)\n          transitions[e.to] = transitions[e.to] || [];\n      };\n\n      if (initial) {\n        initial.event = initial.event || 'startup';\n        add({ name: initial.event, from: 'none', to: initial.state });\n      }\n\n      for(var n = 0 ; n < events.length ; n++)\n        add(events[n]);\n\n      for(var name in map) {\n        if (map.hasOwnProperty(name))\n          fsm[name] = StateMachine.buildEvent(name, map[name]);\n      }\n\n      for(var name in callbacks) {\n        if (callbacks.hasOwnProperty(name))\n          fsm[name] = callbacks[name]\n      }\n\n      fsm.current     = 'none';\n      fsm.is          = function(state) { return Array.isArray(state) ? (state.indexOf(this.current) >= 0) : (this.current === state); };\n      fsm.can         = function(event) { return !this.transition && (map[event] !== undefined) && (map[event].hasOwnProperty(this.current) || map[event].hasOwnProperty(StateMachine.WILDCARD)); }\n      fsm.cannot      = function(event) { return !this.can(event); };\n      fsm.transitions = function()      { return (transitions[this.current] || []).concat(transitions[StateMachine.WILDCARD] || []); };\n      fsm.isFinished  = function()      { return this.is(terminal); };\n      fsm.error       = cfg.error || function(name, from, to, args, error, msg, e) { throw e || msg; }; // default behavior when something unexpected happens is to throw an exception, but caller can override this behavior if desired (see github issue #3 and #17)\n      fsm.states      = function() { return Object.keys(transitions).sort() };\n\n      if (initial && !initial.defer)\n        fsm[initial.event]();\n\n      return fsm;\n\n    },\n\n    //===========================================================================\n\n    doCallback: function(fsm, func, name, from, to, args) {\n      if (func) {\n        try {\n          return func.apply(fsm, [name, from, to].concat(args));\n        }\n        catch(e) {\n          return fsm.error(name, from, to, args, StateMachine.Error.INVALID_CALLBACK, \"an exception occurred in a caller-provided callback function\", e);\n        }\n      }\n    },\n\n    beforeAnyEvent:  function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onbeforeevent'],                       name, from, to, args); },\n    afterAnyEvent:   function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onafterevent'] || fsm['onevent'],      name, from, to, args); },\n    leaveAnyState:   function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onleavestate'],                        name, from, to, args); },\n    enterAnyState:   function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onenterstate'] || fsm['onstate'],      name, from, to, args); },\n    changeState:     function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onchangestate'],                       name, from, to, args); },\n\n    beforeThisEvent: function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onbefore' + name],                     name, from, to, args); },\n    afterThisEvent:  function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onafter'  + name] || fsm['on' + name], name, from, to, args); },\n    leaveThisState:  function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onleave'  + from],                     name, from, to, args); },\n    enterThisState:  function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onenter'  + to]   || fsm['on' + to],   name, from, to, args); },\n\n    beforeEvent: function(fsm, name, from, to, args) {\n      if ((false === StateMachine.beforeThisEvent(fsm, name, from, to, args)) ||\n          (false === StateMachine.beforeAnyEvent( fsm, name, from, to, args)))\n        return false;\n    },\n\n    afterEvent: function(fsm, name, from, to, args) {\n      StateMachine.afterThisEvent(fsm, name, from, to, args);\n      StateMachine.afterAnyEvent( fsm, name, from, to, args);\n    },\n\n    leaveState: function(fsm, name, from, to, args) {\n      var specific = StateMachine.leaveThisState(fsm, name, from, to, args),\n          general  = StateMachine.leaveAnyState( fsm, name, from, to, args);\n      if ((false === specific) || (false === general))\n        return false;\n      else if ((StateMachine.ASYNC === specific) || (StateMachine.ASYNC === general))\n        return StateMachine.ASYNC;\n    },\n\n    enterState: function(fsm, name, from, to, args) {\n      StateMachine.enterThisState(fsm, name, from, to, args);\n      StateMachine.enterAnyState( fsm, name, from, to, args);\n    },\n\n    //===========================================================================\n\n    buildEvent: function(name, map) {\n      return function() {\n\n        var from  = this.current;\n        var to    = map[from] || (map[StateMachine.WILDCARD] != StateMachine.WILDCARD ? map[StateMachine.WILDCARD] : from) || from;\n        var args  = Array.prototype.slice.call(arguments); // turn arguments into pure array\n\n        if (this.transition)\n          return this.error(name, from, to, args, StateMachine.Error.PENDING_TRANSITION, \"event \" + name + \" inappropriate because previous transition did not complete\");\n\n        if (this.cannot(name))\n          return this.error(name, from, to, args, StateMachine.Error.INVALID_TRANSITION, \"event \" + name + \" inappropriate in current state \" + this.current);\n\n        if (false === StateMachine.beforeEvent(this, name, from, to, args))\n          return StateMachine.Result.CANCELLED;\n\n        if (from === to) {\n          StateMachine.afterEvent(this, name, from, to, args);\n          return StateMachine.Result.NOTRANSITION;\n        }\n\n        // prepare a transition method for use EITHER lower down, or by caller if they want an async transition (indicated by an ASYNC return value from leaveState)\n        var fsm = this;\n        this.transition = function() {\n          fsm.transition = null; // this method should only ever be called once\n          fsm.current = to;\n          StateMachine.enterState( fsm, name, from, to, args);\n          StateMachine.changeState(fsm, name, from, to, args);\n          StateMachine.afterEvent( fsm, name, from, to, args);\n          return StateMachine.Result.SUCCEEDED;\n        };\n        this.transition.cancel = function() { // provide a way for caller to cancel async transition if desired (issue #22)\n          fsm.transition = null;\n          StateMachine.afterEvent(fsm, name, from, to, args);\n        }\n\n        var leave = StateMachine.leaveState(this, name, from, to, args);\n        if (false === leave) {\n          this.transition = null;\n          return StateMachine.Result.CANCELLED;\n        }\n        else if (StateMachine.ASYNC === leave) {\n          return StateMachine.Result.PENDING;\n        }\n        else {\n          if (this.transition) // need to check in case user manually called transition() but forgot to return StateMachine.ASYNC\n            return this.transition();\n        }\n\n      };\n    }\n\n  }; // StateMachine\n\n  //===========================================================================\n\n  //======\n  // NODE\n  //======\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = StateMachine;\n    }\n    exports.StateMachine = StateMachine;\n  }\n  //============\n  // AMD/REQUIRE\n  //============\n  else if (typeof define === 'function' && define.amd) {\n    define(function(require) { return StateMachine; });\n  }\n  //========\n  // BROWSER\n  //========\n  else if (typeof window !== 'undefined') {\n    window.StateMachine = StateMachine;\n  }\n  //===========\n  // WEB WORKER\n  //===========\n  else if (typeof self !== 'undefined') {\n    self.StateMachine = StateMachine;\n  }\n\n}());\n","/**\n * @module inherit\n * @version 2.2.7\n * @author Filatov Dmitry <dfilatov@yandex-team.ru>\n * @description This module provides some syntax sugar for \"class\" declarations, constructors, mixins, \"super\" calls and static members.\n */\n\n(function(global) {\n\nvar noop = function() {},\n    hasOwnProperty = Object.prototype.hasOwnProperty,\n    objCreate = Object.create || function(ptp) {\n        var inheritance = function() {};\n        inheritance.prototype = ptp;\n        return new inheritance();\n    },\n    objKeys = Object.keys || function(obj) {\n        var res = [];\n        for(var i in obj) {\n            hasOwnProperty.call(obj, i) && res.push(i);\n        }\n        return res;\n    },\n    extend = function(o1, o2) {\n        for(var i in o2) {\n            hasOwnProperty.call(o2, i) && (o1[i] = o2[i]);\n        }\n\n        return o1;\n    },\n    extendStatic = Object.setPrototypeOf || extend,\n    toStr = Object.prototype.toString,\n    isArray = Array.isArray || function(obj) {\n        return toStr.call(obj) === '[object Array]';\n    },\n    isFunction = function(obj) {\n        return toStr.call(obj) === '[object Function]';\n    },\n    needCheckProps = true,\n    testPropObj = { toString : '' };\n\nfor(var i in testPropObj) { // It's a pity ie hasn't toString, valueOf in for\n    testPropObj.hasOwnProperty(i) && (needCheckProps = false);\n}\n\nvar specProps = needCheckProps? ['toString', 'valueOf'] : null;\n\nfunction getPropList(obj) {\n    var res = objKeys(obj);\n    if(needCheckProps) {\n        var specProp, i = 0;\n        while(specProp = specProps[i++]) {\n            obj.hasOwnProperty(specProp) && res.push(specProp);\n        }\n    }\n\n    return res;\n}\n\nfunction override(base, res, add) {\n    var addList = getPropList(add),\n        j = 0, len = addList.length,\n        name, prop;\n    while(j < len) {\n        if((name = addList[j++]) === '__self') {\n            continue;\n        }\n        prop = add[name];\n        if(isFunction(prop) &&\n                (!prop.prototype || !prop.prototype.__self) && // check to prevent wrapping of \"class\" functions\n                (prop.toString().indexOf('.__base') > -1)) {\n            res[name] = (function(name, prop) {\n                var baseMethod = base[name]?\n                        base[name] :\n                        name === '__constructor'? // case of inheritance from plain function\n                            res.__self.__parent :\n                            noop,\n                    result = function() {\n                        var baseSaved = this.__base;\n\n                        this.__base = result.__base;\n                        var res = prop.apply(this, arguments);\n                        this.__base = baseSaved;\n\n                        return res;\n                    };\n                result.__base = baseMethod;\n\n                return result;\n            })(name, prop);\n        } else {\n            res[name] = prop;\n        }\n    }\n}\n\nfunction applyMixins(mixins, res) {\n    var i = 1, mixin;\n    while(mixin = mixins[i++]) {\n        res?\n            isFunction(mixin)?\n                inherit.self(res, mixin.prototype, mixin) :\n                inherit.self(res, mixin) :\n            res = isFunction(mixin)?\n                inherit(mixins[0], mixin.prototype, mixin) :\n                inherit(mixins[0], mixin);\n    }\n    return res || mixins[0];\n}\n\n/**\n* Creates class\n* @exports\n* @param {Function|Array} [baseClass|baseClassAndMixins] class (or class and mixins) to inherit from\n* @param {Object} prototypeFields\n* @param {Object} [staticFields]\n* @returns {Function} class\n*/\nfunction inherit() {\n    var args = arguments,\n        withMixins = isArray(args[0]),\n        hasBase = withMixins || isFunction(args[0]),\n        base = hasBase? withMixins? applyMixins(args[0]) : args[0] : noop,\n        props = args[hasBase? 1 : 0] || {},\n        staticProps = args[hasBase? 2 : 1],\n        res = props.__constructor || (hasBase && base.prototype && base.prototype.__constructor)?\n            function() {\n                return this.__constructor.apply(this, arguments);\n            } :\n            hasBase?\n                function() {\n                    return base.apply(this, arguments);\n                } :\n                function() {};\n\n    if(!hasBase) {\n        res.prototype = props;\n        res.prototype.__self = res.prototype.constructor = res;\n        return extend(res, staticProps);\n    }\n\n    extendStatic(res, base);\n\n    res.__parent = base;\n\n    var basePtp = base.prototype,\n        resPtp = res.prototype = objCreate(basePtp);\n\n    resPtp.__self = resPtp.constructor = res;\n\n    props && override(basePtp, resPtp, props);\n    staticProps && override(base, res, staticProps);\n\n    return res;\n}\n\ninherit.self = function() {\n    var args = arguments,\n        withMixins = isArray(args[0]),\n        base = withMixins? applyMixins(args[0], args[0][0]) : args[0],\n        props = args[1],\n        staticProps = args[2],\n        basePtp = base.prototype;\n\n    props && override(basePtp, basePtp, props);\n    staticProps && override(base, base, staticProps);\n\n    return base;\n};\n\nvar defineAsGlobal = true;\n/* istanbul ignore next */\nif(typeof exports === 'object') {\n    module.exports = inherit;\n    defineAsGlobal = false;\n}\n/* istanbul ignore next */\nif(typeof modules === 'object' && typeof modules.define === 'function') {\n    modules.define('inherit', function(provide) {\n        provide(inherit);\n    });\n    defineAsGlobal = false;\n}\n/* istanbul ignore next */\nif(typeof define === 'function') {\n    define(function(require, exports, module) {\n        module.exports = inherit;\n    });\n    defineAsGlobal = false;\n}\n/* istanbul ignore next */\ndefineAsGlobal && (global.inherit = inherit);\n\n})(this);\n","/* eslint-disable import/no-unresolved */\nimport { TypedMessage } from 'leancloud-realtime';\n\nif (!TypedMessage) {\n  throw new Error('LeanCloud Realtime SDK not installed');\n}\n\nexport { TypedMessage, messageType, messageField } from 'leancloud-realtime';\n","import inherit from 'inherit';\nimport { TypedMessage, messageField } from '../realtime';\n\n// use dynamic class inherit helper instead of ES class syntex\n// to prevent TypedMessage from being included in the bundler\nconst Signaling = inherit(TypedMessage, {\n  __constructor(payload) {\n    this.__base();\n    this.payload = payload;\n  },\n});\nSignaling.sendOptions = {\n  transient: true,\n};\n\nmessageField('payload')(Signaling);\n\nexport { Signaling as default };\n","import Signaling from './signaling';\nimport { messageType } from '../realtime';\n\n@messageType(-102)\nexport default class Answer extends Signaling {}\n","import Signaling from './signaling';\nimport { messageType } from '../realtime';\n\n@messageType(-103)\nexport default class ICECandidate extends Signaling {}\n","import Signaling from './signaling';\nimport { messageType } from '../realtime';\n\n@messageType(-104)\nexport default class Refusal extends Signaling {}\n","import Signaling from './signaling';\nimport { messageType } from '../realtime';\n\n@messageType(-105)\nexport default class Cancelation extends Signaling {}\n","import EventEmitter from 'eventemitter3';\nimport createCallStateMachine from './call-state-machine';\nimport Answer from '../signalings/answer';\nimport ICECandidate from '../signalings/ice-candidate';\nimport Refusal from '../signalings/refusal';\nimport Cancelation from '../signalings/cancelation';\n\nexport default class Call extends EventEmitter {\n  /**\n   * {@link IncomingCall} 与 {@link OutgoingCall} 的基类\n   * @abstract\n   */\n  constructor(conversation, RTCConfiguration) {\n    super();\n    this._setConversation(conversation);\n    this._peerConnection = this._createPeerConnection(RTCConfiguration);\n    this._call = createCallStateMachine();\n    this._promises = {};\n    const streamReady = new Promise(resolve => {\n      this._promises.resolveStreamReady = resolve;\n    });\n    const accept = new Promise(resolve => {\n      this._promises.resolveAccept = resolve;\n    });\n    Promise.all([streamReady, accept]).then(([stream]) => {\n      if (this._call.can('connect')) {\n        this._call.connect();\n        /**\n         * 通话连接成功\n         * @event Call#connect\n         * @param {MediaStream} stram 对方的媒体流\n         */\n        this.emit('connect', stream);\n      }\n    });\n  }\n\n  /**\n   * 当前通话状态\n   * （<code>calling</code>, <code>connected</code>, <code>closed</code>,\n   * <code>refused</code>, <code>canceled</code>）\n   * @type {string}\n   * @readonly\n   */\n  get state() {\n    return this._call.current;\n  }\n\n  /**\n   * 结束通话\n   * @return {Promise}\n   */\n  close() {\n    return Promise.resolve().then(() => {\n      this._call.close();\n      this._destroyPeerConnection();\n      this._peerConnection.close();\n      this._destroy();\n    });\n  }\n\n  _handleCloseEvent() {\n    if (this._call.can('close')) {\n      this.close();\n      /**\n       * 通话结束，可能是对方挂断或网络中断\n       * @event Call#close\n       */\n      this.emit('close');\n    }\n  }\n\n  _setConversation(conversation) {\n    if (this._conversation) {\n      this._conversation.off('message');\n    }\n    if (conversation) {\n      this._conversation = conversation;\n      conversation.on('message', this._handleMessage.bind(this));\n    }\n  }\n\n  _destroy() {\n    this._conversation.off('message');\n  }\n\n  _createPeerConnection(RTCConfiguration) {\n    const connection = new RTCPeerConnection(RTCConfiguration);\n    connection.onicecandidate = this._handleICECandidateEvent.bind(this);\n    connection.onaddstream = this._handleAddStreamEvent.bind(this);\n    connection.onnremovestream = this._handleRemoveStreamEvent.bind(this);\n    connection.oniceconnectionstatechange = this._handleICEConnectionStateChangeEvent.bind(\n      this\n    );\n    connection.onsignalingstatechange = this._handleSignalingStateChangeEvent.bind(\n      this\n    );\n    return connection;\n  }\n\n  _destroyPeerConnection() {\n    const connection = this._peerConnection;\n    delete connection.onaddstream;\n    delete connection.onremovestream;\n    delete connection.onnicecandidate;\n    delete connection.oniceconnectionstatechange;\n    delete connection.onsignalingstatechange;\n  }\n\n  _handleMessage(message) {\n    if (message instanceof Answer) {\n      return this._handleAnswer(message);\n    }\n    if (message instanceof Refusal) {\n      return this._handleRefusal();\n    }\n    if (message instanceof Cancelation) {\n      return this._handleCancelation();\n    }\n    if (message instanceof ICECandidate) {\n      return this._handleICECandidate(message);\n    }\n    return false;\n  }\n\n  _handleICECandidate(message) {\n    const candidate = new RTCIceCandidate(message.payload);\n    if (this._peerConnection) {\n      this._peerConnection\n        .addIceCandidate(candidate)\n        .catch(console.error.bind(console));\n    }\n  }\n\n  _handleICECandidateEvent(event) {\n    if (event.candidate && this._conversation) {\n      return this._conversation\n        .send(new ICECandidate(event.candidate))\n        .catch(console.error.bind(console));\n    }\n    return false;\n  }\n\n  _handleAddStreamEvent(event) {\n    this._promises.resolveStreamReady(event.stream);\n  }\n\n  _handleRemoveStreamEvent() {\n    this._handleCloseEvent();\n  }\n\n  _handleICEConnectionStateChangeEvent() {\n    switch (this._peerConnection.iceConnectionState) {\n      case 'closed':\n      case 'failed':\n      case 'disconnected':\n        this._handleCloseEvent();\n        break;\n      default:\n    }\n  }\n\n  _handleSignalingStateChangeEvent() {\n    switch (this._peerConnection.signalingState) {\n      case 'closed':\n        this._handleCloseEvent();\n        break;\n      default:\n    }\n  }\n\n  /* eslint-disable class-methods-use-this */\n  _handleAnswer() {\n    throw new Error('not implemented');\n  }\n\n  _handleRefusal() {\n    throw new Error('not implemented');\n  }\n\n  _handleCancelation() {\n    throw new Error('not implemented');\n  }\n  /* eslint-enable class-methods-use-this */\n}\n","import StateMachine from 'javascript-state-machine';\n\nexport default () =>\n  StateMachine.create({\n    initial: 'calling',\n    events: [\n      {\n        name: 'connect',\n        from: 'calling',\n        to: 'connected',\n      },\n      {\n        name: 'close',\n        from: 'connected',\n        to: 'closed',\n      },\n      {\n        name: 'cancel',\n        from: 'calling',\n        to: 'canceled',\n      },\n      {\n        name: 'refuse',\n        from: 'calling',\n        to: 'refused',\n      },\n    ],\n  });\n","import Call from './call';\nimport Cancelation from '../signalings/cancelation';\n\nexport default class OutgoingCall extends Call {\n  /**\n   * 呼出的通话\n   * @extends Call\n   */\n  constructor(to, conversation, RTCConfiguration) {\n    super(conversation, RTCConfiguration);\n    /**\n     * 呼叫目标 id\n     * @type {string}\n     */\n    this.to = to;\n  }\n\n  _handleAnswer(answer) {\n    const desc = new RTCSessionDescription(answer.payload);\n    this._peerConnection.setRemoteDescription(desc);\n    this._promises.resolveAccept();\n  }\n\n  _handleRefusal() {\n    this._destroyPeerConnection();\n    this._call.refuse();\n    /**\n     * 呼叫被对方拒绝\n     * @event OutgoingCall#refuse\n     */\n    this.emit('refuse');\n    this._destroy();\n  }\n\n  /**\n   * 取消该次呼叫\n   * @return {Promise}\n   */\n  cancel() {\n    this._call.cancel();\n    return this._conversation\n      .send(new Cancelation())\n      .then(() => this._destroy());\n  }\n\n  /**\n   * 结束通话，如果在 <code>calling</code> 状态，则取消该次呼叫\n   * @return {Promise}\n   */\n  close() {\n    if (this._call.can('cancel')) {\n      return this.cancel();\n    }\n    return super.close();\n  }\n}\n","import Call from './call';\nimport Answer from '../signalings/answer';\nimport Refusal from '../signalings/refusal';\n\nexport default class IncomingCall extends Call {\n  /**\n   * 呼入的通话\n   * @extends Call\n   */\n  constructor(offer, conversation, RTCConfiguration) {\n    super(conversation, RTCConfiguration);\n    /**\n     * 呼叫者 id\n     * @type {string}\n     */\n    this.from = offer.from;\n    const desc = new RTCSessionDescription(offer.payload);\n    this._handleOfferPromise = this._peerConnection.setRemoteDescription(desc);\n  }\n\n  /**\n   * 接受该呼入通话\n   * @param  {MediaStream} stream 本地流媒体，参见 {@link https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API MediaStream}\n   * @return {Promise}\n   */\n  accept(stream) {\n    if (!stream) {\n      throw new TypeError(\n        'a MediaStream instance is required to accept a call'\n      );\n    }\n    return this._handleOfferPromise\n      .then(() => this._peerConnection.addStream(stream))\n      .then(() => this._peerConnection.createAnswer())\n      .then(answer => this._peerConnection.setLocalDescription(answer))\n      .then(() =>\n        this._conversation.send(\n          new Answer(this._peerConnection.localDescription)\n        )\n      )\n      .then(() => this._promises.resolveAccept());\n  }\n\n  /**\n   * 拒绝该呼入通话\n   * @return {Promise}\n   */\n  refuse() {\n    return this._conversation.send(new Refusal()).then(() => {\n      this._call.refuse();\n      this._destroy();\n    });\n  }\n\n  _handleCancelation() {\n    this._call.cancel();\n    /**\n     * 呼叫被对方取消\n     * @event IncomingCall#cancel\n     */\n    this.emit('cancel');\n    this._destroy();\n  }\n}\n","import Signaling from './signaling';\nimport { messageType } from '../realtime';\n\n@messageType(-101)\nexport default class Offer extends Signaling {}\n","import EventEmitter from 'eventemitter3';\nimport OutgoingCall from './call/outgoing-call';\nimport IncomingCall from './call/incoming-call';\nimport Offer from './signalings/offer';\n\nconst DEFAULT_RTCCONF = {\n  iceServers: [\n    {\n      urls: [\n        'stun:stun.l.google.com:19302',\n        'stun:stun1.l.google.com:19302',\n        'stun:stun2.l.google.com:19302',\n        'stun:stun3.l.google.com:19302',\n        'stun:stun4.l.google.com:19302',\n        'stun:stun.ekiga.net',\n        'stun:stun.ideasip.com',\n        'stun:stun.rixtelecom.se',\n        'stun:stun.schlund.de',\n        'stun:stun.stunprotocol.org:3478',\n        'stun:stun.voiparound.com',\n        'stun:stun.voipbuster.com',\n        'stun:stun.voipstunt.com',\n        'stun:stun.voxgratia.org',\n      ],\n    },\n  ],\n};\n\nexport default class WebRTCClient extends EventEmitter {\n  /**\n   * 无法直接实例化，请使用 {@link createWebRTCClient Realtime#createWebRTCClient} 创建新的 WebRTCClient\n   */\n  constructor(id, options) {\n    if (typeof id !== 'string') {\n      throw new TypeError('id is not a string');\n    }\n    super();\n    /** @type {string} */\n    this.id = id;\n    this.options = Object.assign(\n      {\n        RTCConfiguration: DEFAULT_RTCCONF,\n      },\n      options\n    );\n  }\n\n  _open(realtime, clientOptions) {\n    return realtime\n      .createIMClient(this.id, clientOptions, 'webrtc')\n      .then(imClient => {\n        this._imClient = imClient;\n        this.id = imClient.id;\n        imClient.on('message', (message, conversation) => {\n          if (message instanceof Offer) {\n            return this._handleOffer(message, conversation);\n          }\n          return false;\n        });\n        /**\n         * 用户在其他客户端登录，当前客户端被服务端强行下线。详见文档「单点登录」章节。\n         * @event WebRTCClient#conflict\n         */\n        imClient.on('conflict', (...payload) =>\n          this.emit('conflict', ...payload)\n        );\n        return this;\n      });\n  }\n\n  /**\n   * 关闭客户端\n   * @return {Promise}\n   */\n  close() {\n    return this._imClient.close();\n  }\n\n  /**\n   * 呼叫另一个用户\n   * @param  {string} targetId 用户 ID\n   * @param  {MediaStream} stream 本地流媒体，参见 {@link https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API MediaStream}\n   * @return {Promise.<OutgoingCall>} 呼出通话\n   */\n  call(targetId, stream) {\n    if (typeof targetId !== 'string') {\n      throw new TypeError('target id is not a string');\n    }\n    if (!stream) {\n      throw new TypeError('a MediaStream instance is required to make a call');\n    }\n    return this._imClient.ping([targetId]).then(onlineClients => {\n      if (!onlineClients.length) {\n        throw new Error(`Call failed as ${targetId} is not online`);\n      }\n      const outgoingCall = new OutgoingCall(\n        targetId,\n        null,\n        this.options.RTCConfiguration\n      );\n      const promise = new Promise(resolve => {\n        outgoingCall._peerConnection.onnegotiationneeded = resolve;\n      });\n      outgoingCall._peerConnection.addStream(stream);\n      return promise\n        .then(() =>\n          Promise.all([\n            this._imClient.createConversation({\n              members: [targetId],\n              unique: true,\n            }),\n            outgoingCall._peerConnection\n              .createOffer()\n              .then(localDescription => {\n                outgoingCall._peerConnection.setLocalDescription(\n                  localDescription\n                );\n              }),\n          ])\n        )\n        .then(([conversation]) => {\n          outgoingCall._setConversation(conversation);\n          return conversation.send(\n            new Offer(outgoingCall._peerConnection.localDescription)\n          );\n        })\n        .then(() => outgoingCall);\n    });\n  }\n\n  _handleOffer(offer, conversation) {\n    const incomingCall = new IncomingCall(\n      offer,\n      conversation,\n      this.options.RTCConfiguration\n    );\n    /**\n     * 收到其他用户的呼叫\n     * @event WebRTCClient#call\n     * @param {incomingCall} incomingCall 呼入通话\n     */\n    this.emit('call', incomingCall);\n  }\n}\n","/* eslint-disable import/prefer-default-export */\n/** @module leancloud-realtime-plugin-webrtc */\nimport WebRTCClient from './webrtc-client';\nimport Offer from './signalings/offer';\nimport Answer from './signalings/answer';\nimport ICECandidate from './signalings/ice-candidate';\nimport Refusal from './signalings/refusal';\nimport Cancelation from './signalings/cancelation';\nimport { name } from '../package.json';\n\nconst messageClasses = [Offer, Answer, ICECandidate, Refusal, Cancelation];\n\nconst onRealtimeCreate = realtime => {\n  /**\n   * 创建一个 WebRTC 客户端，多次创建相同 id 的客户端会返回同一个实例。应用 WebRTC 插件后，Realtime 类会增加该实例方法。\n   * WebRTC 客户端是单点登录的，既在同一时刻，同一个 id 只允许一个客户端在线，后登录的客户端会将原来在线上的客户端踢下线。\n   * @function createWebRTCClient\n   * @global\n   * @param  {String} id 客户端 id\n   * @param  {Object} [clientOptions] 详细参数 @see {@link IMClient}\n   * @param  {Object} [clientOptions.RTCConfiguration] @see {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCConfiguration RTCConfiguration}\n   * @return {Promise.<WebRTCClient>}\n   */\n  // eslint-disable-next-line no-param-reassign\n  realtime.createWebRTCClient = (id, clientOptions) =>\n    new WebRTCClient(id)._open(realtime, clientOptions);\n};\n\n/**\n * WebRTC 插件，使用后可通过 {@link createWebRTCClient Realtime#createWebRTCClient}\n * 创建 {@link WebRTCClient} 实现音视频通话\n * @example\n * var realtime = new Realtime({\n *   appId: appId,\n *   plugins: WebRTCPlugin,\n * });\n * realtime.createWebRTCClient(id);\n */\nexport const WebRTCPlugin = {\n  name,\n  messageClasses,\n  onRealtimeCreate,\n};\n\n/**\n * 当前浏览器是否支持 WebRTC 的标记\n * @type {Boolean}\n */\nexport const isWebRTCSupported = !!(\n  window.RTCPeerConnection &&\n  window.RTCSessionDescription &&\n  window.RTCIceCandidate\n);\n"],"names":["has","Object","prototype","hasOwnProperty","prefix","Events","EE","fn","context","once","this","addListener","emitter","event","TypeError","listener","evt","_events","push","_eventsCount","clearEvent","EventEmitter","create","__proto__","eventNames","events","name","names","call","slice","getOwnPropertySymbols","concat","listeners","handlers","i","l","length","ee","Array","listenerCount","emit","a1","a2","a3","a4","a5","args","len","arguments","removeListener","undefined","apply","j","on","removeAllListeners","off","prefixed","module","StateMachine","VERSION","Result","SUCCEEDED","NOTRANSITION","CANCELLED","PENDING","Error","INVALID_TRANSITION","PENDING_TRANSITION","INVALID_CALLBACK","WILDCARD","ASYNC","cfg","target","initial","state","terminal","fsm","callbacks","map","transitions","add","e","from","isArray","n","to","buildEvent","current","is","indexOf","can","transition","cannot","isFinished","error","msg","states","keys","sort","defer","doCallback","func","beforeAnyEvent","afterAnyEvent","leaveAnyState","enterAnyState","changeState","beforeThisEvent","afterThisEvent","leaveThisState","enterThisState","beforeEvent","afterEvent","leaveState","specific","general","enterState","cancel","leave","exports","global","noop","objCreate","ptp","inheritance","objKeys","obj","res","extend","o1","o2","extendStatic","setPrototypeOf","toStr","toString","isFunction","needCheckProps","testPropObj","specProps","override","base","prop","addList","specProp","getPropList","__self","baseMethod","__parent","result","baseSaved","__base","applyMixins","mixins","mixin","inherit","self","withMixins","hasBase","props","staticProps","__constructor","constructor","basePtp","resPtp","defineAsGlobal","modules","define","provide","TypedMessage","Signaling","payload","sendOptions","transient","Answer","messageType","ICECandidate","Refusal","Cancelation","Call","conversation","RTCConfiguration","_setConversation","_peerConnection","_this","_createPeerConnection","_call","_promises","streamReady","Promise","resolve","resolveStreamReady","accept","resolveAccept","all","then","stream","connect","close","_this2","_destroyPeerConnection","_destroy","_handleCloseEvent","_conversation","_handleMessage","bind","connection","RTCPeerConnection","onicecandidate","_handleICECandidateEvent","onaddstream","_handleAddStreamEvent","onnremovestream","_handleRemoveStreamEvent","oniceconnectionstatechange","_handleICEConnectionStateChangeEvent","onsignalingstatechange","_handleSignalingStateChangeEvent","onremovestream","onnicecandidate","message","_handleAnswer","_handleRefusal","_handleCancelation","_handleICECandidate","candidate","RTCIceCandidate","addIceCandidate","catch","console","send","iceConnectionState","signalingState","OutgoingCall","answer","desc","RTCSessionDescription","setRemoteDescription","refuse","IncomingCall","offer","_handleOfferPromise","addStream","createAnswer","setLocalDescription","localDescription","_this3","Offer","DEFAULT_RTCCONF","iceServers","urls","WebRTCClient","id","options","assign","_open","realtime","clientOptions","createIMClient","imClient","_imClient","_handleOffer","targetId","ping","onlineClients","outgoingCall","promise","onnegotiationneeded","createConversation","members","unique","createOffer","incomingCall","WebRTCPlugin","messageClasses","onRealtimeCreate","createWebRTCClient","isWebRTCSupported","window"],"mappings":"2lCAEA,IAAIA,EAAMC,OAAOC,UAAUC,eACvBC,EAAS,IASb,SAASC,KA4BT,SAASC,EAAGC,EAAIC,EAASC,GACvBC,KAAKH,GAAKA,EACVG,KAAKF,QAAUA,EACfE,KAAKD,KAAOA,IAAQ,EActB,SAASE,EAAYC,EAASC,EAAON,EAAIC,EAASC,GAChD,GAAkB,mBAAPF,EACT,MAAM,IAAIO,UAAU,mCAGtB,IAAIC,EAAW,IAAIT,EAAGC,EAAIC,GAAWI,EAASH,GAC1CO,EAAMZ,EAASA,EAASS,EAAQA,EAMpC,OAJKD,EAAQK,QAAQD,GACXJ,EAAQK,QAAQD,GAAKT,GAC1BK,EAAQK,QAAQD,GAAO,CAACJ,EAAQK,QAAQD,GAAMD,GADhBH,EAAQK,QAAQD,GAAKE,KAAKH,IADlCH,EAAQK,QAAQD,GAAOD,EAAUH,EAAQO,gBAI7DP,EAUT,SAASQ,EAAWR,EAASI,GACI,KAAzBJ,EAAQO,aAAoBP,EAAQK,QAAU,IAAIZ,SAC5CO,EAAQK,QAAQD,GAU9B,SAASK,IACPX,KAAKO,QAAU,IAAIZ,EACnBK,KAAKS,aAAe,EAxElBlB,OAAOqB,SACTjB,EAAOH,UAAYD,OAAOqB,OAAO,OAM5B,IAAIjB,GAASkB,YAAWnB,GAAS,IA2ExCiB,EAAanB,UAAUsB,WAAa,WAClC,IACIC,EACAC,EAFAC,EAAQ,GAIZ,GAA0B,IAAtBjB,KAAKS,aAAoB,OAAOQ,EAEpC,IAAKD,KAASD,EAASf,KAAKO,QACtBjB,EAAI4B,KAAKH,EAAQC,IAAOC,EAAMT,KAAKd,EAASsB,EAAKG,MAAM,GAAKH,GAGlE,OAAIzB,OAAO6B,sBACFH,EAAMI,OAAO9B,OAAO6B,sBAAsBL,IAG5CE,GAUTN,EAAanB,UAAU8B,UAAY,SAAmBnB,GACpD,IAAIG,EAAMZ,EAASA,EAASS,EAAQA,EAChCoB,EAAWvB,KAAKO,QAAQD,GAE5B,IAAKiB,EAAU,MAAO,GACtB,GAAIA,EAAS1B,GAAI,MAAO,CAAC0B,EAAS1B,IAElC,IAAK,IAAI2B,EAAI,EAAGC,EAAIF,EAASG,OAAQC,EAAK,IAAIC,MAAMH,GAAID,EAAIC,EAAGD,IAC7DG,EAAGH,GAAKD,EAASC,GAAG3B,GAGtB,OAAO8B,GAUThB,EAAanB,UAAUqC,cAAgB,SAAuB1B,GAC5D,IAAIG,EAAMZ,EAASA,EAASS,EAAQA,EAChCmB,EAAYtB,KAAKO,QAAQD,GAE7B,OAAKgB,EACDA,EAAUzB,GAAW,EAClByB,EAAUI,OAFM,GAYzBf,EAAanB,UAAUsC,KAAO,SAAc3B,EAAO4B,EAAIC,EAAIC,EAAIC,EAAIC,GACjE,IAAI7B,EAAMZ,EAASA,EAASS,EAAQA,EAEpC,IAAKH,KAAKO,QAAQD,GAAM,OAAO,EAE/B,IAEI8B,EACAZ,EAHAF,EAAYtB,KAAKO,QAAQD,GACzB+B,EAAMC,UAAUZ,OAIpB,GAAIJ,EAAUzB,GAAI,CAGhB,OAFIyB,EAAUvB,MAAMC,KAAKuC,eAAepC,EAAOmB,EAAUzB,QAAI2C,GAAW,GAEhEH,GACN,KAAK,EAAG,OAAOf,EAAUzB,GAAGqB,KAAKI,EAAUxB,UAAU,EACrD,KAAK,EAAG,OAAOwB,EAAUzB,GAAGqB,KAAKI,EAAUxB,QAASiC,IAAK,EACzD,KAAK,EAAG,OAAOT,EAAUzB,GAAGqB,KAAKI,EAAUxB,QAASiC,EAAIC,IAAK,EAC7D,KAAK,EAAG,OAAOV,EAAUzB,GAAGqB,KAAKI,EAAUxB,QAASiC,EAAIC,EAAIC,IAAK,EACjE,KAAK,EAAG,OAAOX,EAAUzB,GAAGqB,KAAKI,EAAUxB,QAASiC,EAAIC,EAAIC,EAAIC,IAAK,EACrE,KAAK,EAAG,OAAOZ,EAAUzB,GAAGqB,KAAKI,EAAUxB,QAASiC,EAAIC,EAAIC,EAAIC,EAAIC,IAAK,EAG3E,IAAKX,EAAI,EAAGY,EAAO,IAAIR,MAAMS,EAAK,GAAIb,EAAIa,EAAKb,IAC7CY,EAAKZ,EAAI,GAAKc,UAAUd,GAG1BF,EAAUzB,GAAG4C,MAAMnB,EAAUxB,QAASsC,OACjC,CACL,IACIM,EADAhB,EAASJ,EAAUI,OAGvB,IAAKF,EAAI,EAAGA,EAAIE,EAAQF,IAGtB,OAFIF,EAAUE,GAAGzB,MAAMC,KAAKuC,eAAepC,EAAOmB,EAAUE,GAAG3B,QAAI2C,GAAW,GAEtEH,GACN,KAAK,EAAGf,EAAUE,GAAG3B,GAAGqB,KAAKI,EAAUE,GAAG1B,SAAU,MACpD,KAAK,EAAGwB,EAAUE,GAAG3B,GAAGqB,KAAKI,EAAUE,GAAG1B,QAASiC,GAAK,MACxD,KAAK,EAAGT,EAAUE,GAAG3B,GAAGqB,KAAKI,EAAUE,GAAG1B,QAASiC,EAAIC,GAAK,MAC5D,KAAK,EAAGV,EAAUE,GAAG3B,GAAGqB,KAAKI,EAAUE,GAAG1B,QAASiC,EAAIC,EAAIC,GAAK,MAChE,QACE,IAAKG,EAAM,IAAKM,EAAI,EAAGN,EAAO,IAAIR,MAAMS,EAAK,GAAIK,EAAIL,EAAKK,IACxDN,EAAKM,EAAI,GAAKJ,UAAUI,GAG1BpB,EAAUE,GAAG3B,GAAG4C,MAAMnB,EAAUE,GAAG1B,QAASsC,IAKpD,OAAO,GAYTzB,EAAanB,UAAUmD,GAAK,SAAYxC,EAAON,EAAIC,GACjD,OAAOG,EAAYD,KAAMG,EAAON,EAAIC,GAAS,IAY/Ca,EAAanB,UAAUO,KAAO,SAAcI,EAAON,EAAIC,GACrD,OAAOG,EAAYD,KAAMG,EAAON,EAAIC,GAAS,IAa/Ca,EAAanB,UAAU+C,eAAiB,SAAwBpC,EAAON,EAAIC,EAASC,GAClF,IAAIO,EAAMZ,EAASA,EAASS,EAAQA,EAEpC,IAAKH,KAAKO,QAAQD,GAAM,OAAON,KAC/B,IAAKH,EAEH,OADAa,EAAWV,KAAMM,GACVN,KAGT,IAAIsB,EAAYtB,KAAKO,QAAQD,GAE7B,GAAIgB,EAAUzB,GAEVyB,EAAUzB,KAAOA,GACfE,IAAQuB,EAAUvB,MAClBD,GAAWwB,EAAUxB,UAAYA,GAEnCY,EAAWV,KAAMM,OAEd,CACL,IAAK,IAAIkB,EAAI,EAAGT,EAAS,GAAIW,EAASJ,EAAUI,OAAQF,EAAIE,EAAQF,KAEhEF,EAAUE,GAAG3B,KAAOA,GACnBE,IAASuB,EAAUE,GAAGzB,MACtBD,GAAWwB,EAAUE,GAAG1B,UAAYA,IAErCiB,EAAOP,KAAKc,EAAUE,IAOtBT,EAAOW,OAAQ1B,KAAKO,QAAQD,GAAyB,IAAlBS,EAAOW,OAAeX,EAAO,GAAKA,EACpEL,EAAWV,KAAMM,GAGxB,OAAON,MAUTW,EAAanB,UAAUoD,mBAAqB,SAA4BzC,GACtE,IAAIG,EAUJ,OARIH,GACFG,EAAMZ,EAASA,EAASS,EAAQA,EAC5BH,KAAKO,QAAQD,IAAMI,EAAWV,KAAMM,KAExCN,KAAKO,QAAU,IAAIZ,EACnBK,KAAKS,aAAe,GAGfT,MAMTW,EAAanB,UAAUqD,IAAMlC,EAAanB,UAAU+C,eACpD5B,EAAanB,UAAUS,YAAcU,EAAanB,UAAUmD,GAK5DhC,EAAamC,SAAWpD,EAKxBiB,EAAaA,aAAeA,EAM1BoC,UAAiBpC,sBCrUlB,IAEKqC,EAAAA,EAAe,CAIjBC,QAAS,QAITC,OAAQ,CACNC,UAAc,EACdC,aAAc,EACdC,UAAc,EACdC,QAAc,GAGhBC,MAAO,CACLC,mBAAoB,IACpBC,mBAAoB,IACpBC,iBAAoB,KAGtBC,SAAU,IACVC,MAAO,QAIPhD,OAAQ,SAASiD,EAAKC,GAEpB,IAAIC,EAAsC,iBAAfF,EAAIE,QAAuB,CAAEC,MAAOH,EAAIE,SAAYF,EAAIE,QAC/EE,EAAeJ,EAAII,UAAYJ,EAAW,MAC1CK,EAAeJ,GAAUD,EAAIC,QAAW,GACxC/C,EAAe8C,EAAI9C,QAAU,GAC7BoD,EAAeN,EAAIM,WAAa,GAChCC,EAAe,GACfC,EAAe,GAEfC,EAAM,SAASC,GACjB,IAAIC,EAAO5C,MAAM6C,QAAQF,EAAEC,MAAQD,EAAEC,KAAQD,EAAEC,KAAO,CAACD,EAAEC,MAAQ,CAACxB,EAAaW,UAC/ES,EAAIG,EAAEvD,MAAQoD,EAAIG,EAAEvD,OAAS,GAC7B,IAAK,IAAI0D,EAAI,EAAIA,EAAIF,EAAK9C,OAASgD,IACjCL,EAAYG,EAAKE,IAAML,EAAYG,EAAKE,KAAO,GAC/CL,EAAYG,EAAKE,IAAIlE,KAAK+D,EAAEvD,MAE5BoD,EAAIG,EAAEvD,MAAMwD,EAAKE,IAAMH,EAAEI,IAAMH,EAAKE,GAElCH,EAAEI,KACJN,EAAYE,EAAEI,IAAMN,EAAYE,EAAEI,KAAO,KAGzCZ,IACFA,EAAQ5D,MAAQ4D,EAAQ5D,OAAS,UACjCmE,EAAI,CAAEtD,KAAM+C,EAAQ5D,MAAOqE,KAAM,OAAQG,GAAIZ,EAAQC,SAGvD,IAAI,IAAIU,EAAI,EAAIA,EAAI3D,EAAOW,OAASgD,IAClCJ,EAAIvD,EAAO2D,IAEb,IAAI,IAAI1D,KAAQoD,EACVA,EAAI3E,eAAeuB,KACrBkD,EAAIlD,GAAQgC,EAAa4B,WAAW5D,EAAMoD,EAAIpD,KAGlD,IAAI,IAAIA,KAAQmD,EACVA,EAAU1E,eAAeuB,KAC3BkD,EAAIlD,GAAQmD,EAAUnD,IAe1B,OAZAkD,EAAIW,QAAc,OAClBX,EAAIY,GAAc,SAASd,GAAS,OAAOpC,MAAM6C,QAAQT,GAAyC,GAA/BA,EAAMe,QAAQ/E,KAAK6E,SAAkB7E,KAAK6E,UAAYb,GACzHE,EAAIc,IAAc,SAAS7E,GAAS,OAAQH,KAAKiF,iBAA8BzC,IAAf4B,EAAIjE,KAA0BiE,EAAIjE,GAAOV,eAAeO,KAAK6E,UAAYT,EAAIjE,GAAOV,eAAeuD,EAAaW,YAChLO,EAAIgB,OAAc,SAAS/E,GAAS,OAAQH,KAAKgF,IAAI7E,IACrD+D,EAAIG,YAAc,WAAkB,OAAQA,EAAYrE,KAAK6E,UAAY,IAAIxD,OAAOgD,EAAYrB,EAAaW,WAAa,KAC1HO,EAAIiB,WAAc,WAAkB,OAAOnF,KAAK8E,GAAGb,IACnDC,EAAIkB,MAAcvB,EAAIuB,OAAS,SAASpE,EAAMwD,EAAMG,EAAIvC,EAAMgD,EAAOC,EAAKd,GAAK,MAAMA,GAAKc,GAC1FnB,EAAIoB,OAAc,WAAa,OAAO/F,OAAOgG,KAAKlB,GAAamB,QAE3DzB,IAAYA,EAAQ0B,OACtBvB,EAAIH,EAAQ5D,SAEP+D,GAMTwB,WAAY,SAASxB,EAAKyB,EAAM3E,EAAMwD,EAAMG,EAAIvC,GAC9C,GAAIuD,EACF,IACE,OAAOA,EAAKlD,MAAMyB,EAAK,CAAClD,EAAMwD,EAAMG,GAAItD,OAAOe,IAEjD,MAAMmC,GACJ,OAAOL,EAAIkB,MAAMpE,EAAMwD,EAAMG,EAAIvC,EAAMY,EAAaO,MAAMG,iBAAkB,+DAAgEa,KAKlJqB,eAAiB,SAAS1B,EAAKlD,EAAMwD,EAAMG,EAAIvC,GAAQ,OAAOY,EAAa0C,WAAWxB,EAAKA,EAAmB,cAAyBlD,EAAMwD,EAAMG,EAAIvC,IACvJyD,cAAiB,SAAS3B,EAAKlD,EAAMwD,EAAMG,EAAIvC,GAAQ,OAAOY,EAAa0C,WAAWxB,EAAKA,EAAkB,cAAKA,EAAa,QAAQlD,EAAMwD,EAAMG,EAAIvC,IACvJ0D,cAAiB,SAAS5B,EAAKlD,EAAMwD,EAAMG,EAAIvC,GAAQ,OAAOY,EAAa0C,WAAWxB,EAAKA,EAAkB,aAA0BlD,EAAMwD,EAAMG,EAAIvC,IACvJ2D,cAAiB,SAAS7B,EAAKlD,EAAMwD,EAAMG,EAAIvC,GAAQ,OAAOY,EAAa0C,WAAWxB,EAAKA,EAAkB,cAAKA,EAAa,QAAQlD,EAAMwD,EAAMG,EAAIvC,IACvJ4D,YAAiB,SAAS9B,EAAKlD,EAAMwD,EAAMG,EAAIvC,GAAQ,OAAOY,EAAa0C,WAAWxB,EAAKA,EAAmB,cAAyBlD,EAAMwD,EAAMG,EAAIvC,IAEvJ6D,gBAAiB,SAAS/B,EAAKlD,EAAMwD,EAAMG,EAAIvC,GAAQ,OAAOY,EAAa0C,WAAWxB,EAAKA,EAAI,WAAalD,GAA2BA,EAAMwD,EAAMG,EAAIvC,IACvJ8D,eAAiB,SAAShC,EAAKlD,EAAMwD,EAAMG,EAAIvC,GAAQ,OAAOY,EAAa0C,WAAWxB,EAAKA,EAAI,UAAalD,IAASkD,EAAI,KAAOlD,GAAOA,EAAMwD,EAAMG,EAAIvC,IACvJ+D,eAAiB,SAASjC,EAAKlD,EAAMwD,EAAMG,EAAIvC,GAAQ,OAAOY,EAAa0C,WAAWxB,EAAKA,EAAI,UAAaM,GAA2BxD,EAAMwD,EAAMG,EAAIvC,IACvJgE,eAAiB,SAASlC,EAAKlD,EAAMwD,EAAMG,EAAIvC,GAAQ,OAAOY,EAAa0C,WAAWxB,EAAKA,EAAI,UAAaS,IAAST,EAAI,KAAOS,GAAO3D,EAAMwD,EAAMG,EAAIvC,IAEvJiE,YAAa,SAASnC,EAAKlD,EAAMwD,EAAMG,EAAIvC,GACzC,IAAK,IAAUY,EAAaiD,gBAAgB/B,EAAKlD,EAAMwD,EAAMG,EAAIvC,KAC5D,IAAUY,EAAa4C,eAAgB1B,EAAKlD,EAAMwD,EAAMG,EAAIvC,GAC/D,OAAO,GAGXkE,WAAY,SAASpC,EAAKlD,EAAMwD,EAAMG,EAAIvC,GACxCY,EAAakD,eAAehC,EAAKlD,EAAMwD,EAAMG,EAAIvC,GACjDY,EAAa6C,cAAe3B,EAAKlD,EAAMwD,EAAMG,EAAIvC,IAGnDmE,WAAY,SAASrC,EAAKlD,EAAMwD,EAAMG,EAAIvC,GACxC,IAAIoE,EAAWxD,EAAamD,eAAejC,EAAKlD,EAAMwD,EAAMG,EAAIvC,GAC5DqE,EAAWzD,EAAa8C,cAAe5B,EAAKlD,EAAMwD,EAAMG,EAAIvC,GAChE,OAAK,IAAUoE,IAAc,IAAUC,IAE7BzD,EAAaY,QAAU4C,GAAcxD,EAAaY,QAAU6C,EAC7DzD,EAAaY,WADjB,IAIP8C,WAAY,SAASxC,EAAKlD,EAAMwD,EAAMG,EAAIvC,GACxCY,EAAaoD,eAAelC,EAAKlD,EAAMwD,EAAMG,EAAIvC,GACjDY,EAAa+C,cAAe7B,EAAKlD,EAAMwD,EAAMG,EAAIvC,IAKnDwC,WAAY,SAAS5D,EAAMoD,GACzB,OAAO,WAEL,IAAII,EAAQxE,KAAK6E,QACbF,EAAQP,EAAII,KAAUJ,EAAIpB,EAAaW,WAAaX,EAAaW,SAAWS,EAAIpB,EAAaW,UAAYa,IAASA,EAClHpC,EAAQR,MAAMpC,UAAU2B,MAAMD,KAAKoB,WAEvC,GAAItC,KAAKiF,WACP,OAAOjF,KAAKoF,MAAMpE,EAAMwD,EAAMG,EAAIvC,EAAMY,EAAaO,MAAME,mBAAoB,SAAWzC,EAAO,+DAEnG,GAAIhB,KAAKkF,OAAOlE,GACd,OAAOhB,KAAKoF,MAAMpE,EAAMwD,EAAMG,EAAIvC,EAAMY,EAAaO,MAAMC,mBAAoB,SAAWxC,EAAO,mCAAqChB,KAAK6E,SAE7I,IAAI,IAAU7B,EAAaqD,YAAYrG,KAAMgB,EAAMwD,EAAMG,EAAIvC,GAC3D,OAAOY,EAAaE,OAAOG,UAE7B,GAAImB,IAASG,EAEX,OADA3B,EAAasD,WAAWtG,KAAMgB,EAAMwD,EAAMG,EAAIvC,GACvCY,EAAaE,OAAOE,aAI7B,IAAIc,EAAMlE,KACVA,KAAKiF,WAAa,WAMhB,OALAf,EAAIe,WAAa,KACjBf,EAAIW,QAAUF,EACd3B,EAAa0D,WAAYxC,EAAKlD,EAAMwD,EAAMG,EAAIvC,GAC9CY,EAAagD,YAAY9B,EAAKlD,EAAMwD,EAAMG,EAAIvC,GAC9CY,EAAasD,WAAYpC,EAAKlD,EAAMwD,EAAMG,EAAIvC,GACvCY,EAAaE,OAAOC,WAE7BnD,KAAKiF,WAAW0B,OAAS,WACvBzC,EAAIe,WAAa,KACjBjC,EAAasD,WAAWpC,EAAKlD,EAAMwD,EAAMG,EAAIvC,IAG/C,IAAIwE,EAAQ5D,EAAauD,WAAWvG,KAAMgB,EAAMwD,EAAMG,EAAIvC,GAC1D,OAAI,IAAUwE,GACZ5G,KAAKiF,WAAa,KACXjC,EAAaE,OAAOG,WAEpBL,EAAaY,QAAUgD,EACvB5D,EAAaE,OAAOI,QAGvBtD,KAAKiF,WACAjF,KAAKiF,kBADd,KAe+BlC,EAAO8D,UAC1CA,EAAU9D,UAAiBC,GAE7B6D,eAAuB7D,uCCzM3B,SAAU8D,GAEV,IAAIC,EAAO,aACPtH,EAAiBF,OAAOC,UAAUC,eAClCuH,EAAYzH,OAAOqB,QAAU,SAASqG,GAClC,IAAIC,EAAc,aAElB,OADAA,EAAY1H,UAAYyH,EACjB,IAAIC,GAEfC,EAAU5H,OAAOgG,MAAQ,SAAS6B,GAC9B,IAAIC,EAAM,GACV,IAAI,IAAI7F,KAAK4F,EACT3H,EAAeyB,KAAKkG,EAAK5F,IAAM6F,EAAI7G,KAAKgB,GAE5C,OAAO6F,GAEXC,EAAS,SAASC,EAAIC,GAClB,IAAI,IAAIhG,KAAKgG,EACT/H,EAAeyB,KAAKsG,EAAIhG,KAAO+F,EAAG/F,GAAKgG,EAAGhG,IAG9C,OAAO+F,GAEXE,EAAelI,OAAOmI,gBAAkBJ,EACxCK,EAAQpI,OAAOC,UAAUoI,SACzBnD,EAAU7C,MAAM6C,SAAW,SAAS2C,GAChC,MAA2B,mBAApBO,EAAMzG,KAAKkG,IAEtBS,EAAa,SAAST,GAClB,MAA2B,sBAApBO,EAAMzG,KAAKkG,IAEtBU,GAAiB,EACjBC,EAAc,CAAEH,SAAW,IAE/B,IAAI,IAAIpG,KAAKuG,EACTA,EAAYtI,eAAe+B,KAAOsG,GAAiB,GAGvD,IAAIE,EAAYF,EAAgB,CAAC,WAAY,WAAa,KAc1D,SAASG,EAASC,EAAMb,EAAK/C,GAIzB,IAHA,IAEItD,EAAMmH,EAFNC,EAbR,SAAqBhB,GACjB,IAAIC,EAAMF,EAAQC,GAClB,GAAGU,EAEC,IADA,IAAIO,EAAU7G,EAAI,EACZ6G,EAAWL,EAAUxG,MACvB4F,EAAI3H,eAAe4I,IAAahB,EAAI7G,KAAK6H,GAIjD,OAAOhB,EAIOiB,CAAYhE,GACtB5B,EAAI,EAAGL,EAAM+F,EAAQ1G,OAEnBgB,EAAIL,GACuB,YAAzBrB,EAAOoH,EAAQ1F,QAGnByF,EAAO7D,EAAItD,GACR6G,EAAWM,MACJA,EAAK3I,YAAc2I,EAAK3I,UAAU+I,UACG,EAAtCJ,EAAKP,WAAW7C,QAAQ,WAC7BsC,EAAIrG,GAAQ,SAAUA,EAAMmH,GACxB,IAAIK,EAAaN,EAAKlH,GACdkH,EAAKlH,GACI,kBAATA,EACIqG,EAAIkB,OAAOE,SACX1B,EACR2B,EAAS,WACL,IAAIC,EAAY3I,KAAK4I,OAErB5I,KAAK4I,OAASF,EAAOE,OACrB,IAAIvB,EAAMc,EAAK1F,MAAMzC,KAAMsC,WAG3B,OAFAtC,KAAK4I,OAASD,EAEPtB,GAIf,OAFAqB,EAAOE,OAASJ,EAETE,EAjBC,CAkBT1H,EAAMmH,GAETd,EAAIrG,GAAQmH,GAKxB,SAASU,EAAYC,EAAQzB,GAEzB,IADA,IAAW0B,EAAPvH,EAAI,EACFuH,EAAQD,EAAOtH,MACjB6F,EACIQ,EAAWkB,GACPC,EAAQC,KAAK5B,EAAK0B,EAAMvJ,UAAWuJ,GACnCC,EAAQC,KAAK5B,EAAK0B,GACtB1B,EAAMQ,EAAWkB,GACbC,EAAQF,EAAO,GAAIC,EAAMvJ,UAAWuJ,GACpCC,EAAQF,EAAO,GAAIC,GAE/B,OAAO1B,GAAOyB,EAAO,GAWzB,SAASE,IACL,IAAI5G,EAAOE,UACP4G,EAAazE,EAAQrC,EAAK,IAC1B+G,EAAUD,GAAcrB,EAAWzF,EAAK,IACxC8F,EAAOiB,EAASD,EAAYL,EAAYzG,EAAK,IAAMA,EAAK,GAAK2E,EAC7DqC,EAAQhH,EAAK+G,EAAS,EAAI,IAAM,GAChCE,EAAcjH,EAAK+G,EAAS,EAAI,GAChC9B,EAAM+B,EAAME,eAAkBH,GAAWjB,EAAK1I,WAAa0I,EAAK1I,UAAU8J,cACtE,WACI,OAAOtJ,KAAKsJ,cAAc7G,MAAMzC,KAAMsC,YAE1C6G,EACI,WACI,OAAOjB,EAAKzF,MAAMzC,KAAMsC,YAE5B,aAEZ,IAAI6G,EAGA,OAFA9B,EAAI7H,UAAY4J,EAChB/B,EAAI7H,UAAU+I,OAASlB,EAAI7H,UAAU+J,YAAclC,EAC5CC,EAAOD,EAAKgC,GAGvB5B,EAAaJ,EAAKa,GAIlB,IAAIsB,GAFJnC,EAAIoB,SAAWP,GAEI1I,UACfiK,EAASpC,EAAI7H,UAAYwH,EAAUwC,GAOvC,OALAC,EAAOlB,OAASkB,EAAOF,YAAclC,EAErC+B,GAASnB,EAASuB,EAASC,EAAQL,GACnCC,GAAepB,EAASC,EAAMb,EAAKgC,GAE5BhC,EAGX2B,EAAQC,KAAO,WACX,IAAI7G,EAAOE,UAEP4F,EADazD,EAAQrC,EAAK,IACPyG,EAAYzG,EAAK,GAAIA,EAAK,GAAG,IAAMA,EAAK,GAC3DgH,EAAQhH,EAAK,GACbiH,EAAcjH,EAAK,GACnBoH,EAAUtB,EAAK1I,UAKnB,OAHA4J,GAASnB,EAASuB,EAASA,EAASJ,GACpCC,GAAepB,EAASC,EAAMA,EAAMmB,GAE7BnB,GAGX,IAAIwB,GAAiB,EAGjB3G,UAAiBiG,EACjBU,GAAiB,EAGC,iBAAZC,SAAkD,mBAAnBA,QAAQC,SAC7CD,QAAQC,OAAO,UAAW,SAASC,GAC/BA,EAAQb,KAEZU,GAAiB,GAUrBA,IAAmB5C,EAAOkC,QAAUA,GAxLpC,CA0LGhJ,MC9LH,IAAK8J,qBACG,IAAIvG,MAAM,wCCClB,MAAMwG,EAAYf,EAAQc,eAAc,CACtCR,uBAAcU,QACPpB,cACAoB,QAAUA,KAGnBD,EAAUE,YAAc,CACtBC,WAAW,kBAGA,WAAWH,eCXHI,EADpBC,eAAa,sFACsBL,OCAfM,EADpBD,eAAa,sFAC4BL,OCArBO,EADpBF,eAAa,sFACuBL,OCAhBQ,EADpBH,eAAa,sFAC2BL,OCGpBS,yBAKPC,EAAcC,gCAEnBC,iBAAiBF,KACjBG,gBAAkBC,EAAKC,sBAAsBJ,KAC7CK,MCbP/H,EAAapC,OAAO,CAClBmD,QAAS,UACThD,OAAQ,CACN,CACEC,KAAM,UACNwD,KAAM,UACNG,GAAI,aAEN,CACE3D,KAAM,QACNwD,KAAM,YACNG,GAAI,UAEN,CACE3D,KAAM,SACNwD,KAAM,UACNG,GAAI,YAEN,CACE3D,KAAM,SACNwD,KAAM,UACNG,GAAI,gBDPHqG,UAAY,OACXC,EAAc,IAAIC,QAAQ,SAAAC,KACzBH,UAAUI,mBAAqBD,IAEhCE,EAAS,IAAIH,QAAQ,SAAAC,KACpBH,UAAUM,cAAgBH,WAEjCD,QAAQK,IAAI,CAACN,EAAaI,IAASG,KAAK,gBAAEC,YACpCZ,EAAKE,MAAM/F,IAAI,eACZ+F,MAAMW,YAMN5J,KAAK,UAAW2J,gDAoB3BE,MAAA,6BACST,QAAQC,UAAUK,KAAK,WAC5BI,EAAKb,MAAMY,QACXC,EAAKC,yBACLD,EAAKhB,gBAAgBe,QACrBC,EAAKE,gBAITC,kBAAA,WACM/L,KAAK+K,MAAM/F,IAAI,gBACZ2G,aAKA7J,KAAK,aAId6I,iBAAA,SAAiBF,GACXzK,KAAKgM,oBACFA,cAAcnJ,IAAI,WAErB4H,SACGuB,cAAgBvB,GACR9H,GAAG,UAAW3C,KAAKiM,eAAeC,KAAKlM,UAIxD8L,SAAA,gBACOE,cAAcnJ,IAAI,cAGzBiI,sBAAA,SAAsBJ,OACdyB,EAAa,IAAIC,kBAAkB1B,UACzCyB,EAAWE,eAAiBrM,KAAKsM,yBAAyBJ,KAAKlM,MAC/DmM,EAAWI,YAAcvM,KAAKwM,sBAAsBN,KAAKlM,MACzDmM,EAAWM,gBAAkBzM,KAAK0M,yBAAyBR,KAAKlM,MAChEmM,EAAWQ,2BAA6B3M,KAAK4M,qCAAqCV,KAChFlM,MAEFmM,EAAWU,uBAAyB7M,KAAK8M,iCAAiCZ,KACxElM,MAEKmM,KAGTN,uBAAA,eACQM,EAAanM,KAAK4K,uBACjBuB,EAAWI,mBACXJ,EAAWY,sBACXZ,EAAWa,uBACXb,EAAWQ,kCACXR,EAAWU,0BAGpBZ,eAAA,SAAegB,UACTA,aAAmB9C,EACdnK,KAAKkN,cAAcD,GAExBA,aAAmB3C,EACdtK,KAAKmN,iBAEVF,aAAmB1C,EACdvK,KAAKoN,qBAEVH,aAAmB5C,GACdrK,KAAKqN,oBAAoBJ,MAKpCI,oBAAA,SAAoBJ,OACZK,EAAY,IAAIC,gBAAgBN,EAAQjD,SAC1ChK,KAAK4K,sBACFA,gBACF4C,gBAAgBF,GAChBG,MAAMC,QAAQtI,MAAM8G,KAAKwB,aAIhCpB,yBAAA,SAAyBnM,YACnBA,EAAMmN,YAAatN,KAAKgM,gBACnBhM,KAAKgM,cACT2B,KAAK,IAAItD,EAAalK,EAAMmN,YAC5BG,MAAMC,QAAQtI,MAAM8G,KAAKwB,aAKhClB,sBAAA,SAAsBrM,QACf6K,UAAUI,mBAAmBjL,EAAMsL,WAG1CiB,yBAAA,gBACOX,uBAGPa,qCAAA,kBACU5M,KAAK4K,gBAAgBgD,wBACtB,aACA,aACA,oBACE7B,wBAMXe,iCAAA,kBACU9M,KAAK4K,gBAAgBiD,oBACtB,cACE9B,wBAOXmB,cAAA,iBACQ,IAAI3J,MAAM,sBAGlB4J,eAAA,iBACQ,IAAI5J,MAAM,sBAGlB6J,mBAAA,iBACQ,IAAI7J,MAAM,+DAxITvD,KAAK+K,MAAMlG,2CAtCYlE,GEJbmN,yBAKPnJ,EAAI8F,EAAcC,8BACtBD,EAAcC,UAKf/F,GAAKA,sCAGZuI,cAAA,SAAca,OACNC,EAAO,IAAIC,sBAAsBF,EAAO/D,cACzCY,gBAAgBsD,qBAAqBF,QACrChD,UAAUM,mBAGjB6B,eAAA,gBACOtB,8BACAd,MAAMoD,cAKNrM,KAAK,eACLgK,cAOPnF,OAAA,kCACOoE,MAAMpE,SACJ3G,KAAKgM,cACT2B,KAAK,IAAIpD,GACTiB,KAAK,kBAAMI,EAAKE,gBAOrBH,MAAA,kBACM3L,KAAK+K,MAAM/F,IAAI,UACVhF,KAAK2G,qBAEDgF,qBAlDyBnB,GCCrB4D,yBAKPC,EAAO5D,EAAcC,wBACzBD,EAAcC,UAKflG,KAAO6J,EAAM7J,SACZwJ,EAAO,IAAIC,sBAAsBI,EAAMrE,kBACxCsE,oBAAsBzD,EAAKD,gBAAgBsD,qBAAqBF,uCAQvE3C,OAAA,SAAOI,kBACAA,QACG,IAAIrL,UACR,8DAGGJ,KAAKsO,oBACT9C,KAAK,kBAAMI,EAAKhB,gBAAgB2D,UAAU9C,KAC1CD,KAAK,kBAAMI,EAAKhB,gBAAgB4D,iBAChChD,KAAK,SAAAuC,UAAUnC,EAAKhB,gBAAgB6D,oBAAoBV,KACxDvC,KAAK,kBACJI,EAAKI,cAAc2B,KACjB,IAAIxD,EAAOyB,EAAKhB,gBAAgB8D,qBAGnClD,KAAK,kBAAMI,EAAKZ,UAAUM,qBAO/B6C,OAAA,6BACSnO,KAAKgM,cAAc2B,KAAK,IAAIrD,GAAWkB,KAAK,WACjDmD,EAAK5D,MAAMoD,SACXQ,EAAK7C,gBAITsB,mBAAA,gBACOrC,MAAMpE,cAKN7E,KAAK,eACLgK,eAzDiCtB,GCArBoE,EADpBxE,eAAa,sFACqBL,OCC7B8E,EAAkB,CACtBC,WAAY,CACV,CACEC,KAAM,CACJ,+BACA,gCACA,gCACA,gCACA,gCACA,sBACA,wBACA,0BACA,uBACA,kCACA,2BACA,2BACA,0BACA,8BAMaC,yBAIPC,EAAIC,YACI,iBAAPD,QACH,IAAI7O,UAAU,mDAIjB6O,GAAKA,IACLC,QAAU3P,OAAO4P,OACpB,CACEzE,iBAAkBmE,GAEpBK,uCAIJE,MAAA,SAAMC,EAAUC,qBACPD,EACJE,eAAevP,KAAKiP,GAAIK,EAAe,UACvC9D,KAAK,SAAAgE,UACJ5D,EAAK6D,UAAYD,EACjB5D,EAAKqD,GAAKO,EAASP,GACnBO,EAAS7M,GAAG,UAAW,SAACsK,EAASxC,UAC3BwC,aAAmB2B,GACdhD,EAAK8D,aAAazC,EAASxC,KAQtC+E,EAAS7M,GAAG,WAAY,sCAAIqH,2BAAAA,yBAC1B4B,EAAK9J,WAAL8J,GAAU,mBAAe5B,MAEpB4B,OAQbD,MAAA,kBACS3L,KAAKyP,UAAU9D,WASxBzK,KAAA,SAAKyO,EAAUlE,iBACW,iBAAbkE,QACH,IAAIvP,UAAU,iCAEjBqL,QACG,IAAIrL,UAAU,4DAEfJ,KAAKyP,UAAUG,KAAK,CAACD,IAAWnE,KAAK,SAAAqE,OACrCA,EAAcnO,aACX,IAAI6B,+BAAwBoM,yBAE9BG,EAAe,IAAIhC,EACvB6B,EACA,KACAhB,EAAKO,QAAQxE,kBAETqF,EAAU,IAAI7E,QAAQ,SAAAC,GAC1B2E,EAAalF,gBAAgBoF,oBAAsB7E,WAErD2E,EAAalF,gBAAgB2D,UAAU9C,GAChCsE,EACJvE,KAAK,kBACJN,QAAQK,IAAI,CACVoD,EAAKc,UAAUQ,mBAAmB,CAChCC,QAAS,CAACP,GACVQ,QAAQ,IAEVL,EAAalF,gBACVwF,cACA5E,KAAK,SAAAkD,GACJoB,EAAalF,gBAAgB6D,oBAC3BC,SAKTlD,KAAK,gBAAEf,mBACNqF,EAAanF,iBAAiBF,GACvBA,EAAakD,KAClB,IAAIiB,EAAMkB,EAAalF,gBAAgB8D,qBAG1ClD,KAAK,kBAAMsE,SAIlBJ,aAAA,SAAarB,EAAO5D,OACZ4F,EAAe,IAAIjC,EACvBC,EACA5D,EACAzK,KAAKkP,QAAQxE,uBAOV5I,KAAK,OAAQuO,OAjHoB1P,GCU7B2P,EAAe,CAC1BtP,wCACAuP,eA9BqB,CAAC3B,EAAOzE,EAAQE,EAAcC,EAASC,GA+B5DiG,iBA7BuB,SAAAnB,GAYvBA,EAASoB,mBAAqB,SAACxB,EAAIK,UACjC,IAAIN,EAAaC,GAAIG,MAAMC,EAAUC,MAuB5BoB,KACXC,OAAOvE,mBACPuE,OAAO1C,uBACP0C,OAAOpD"}